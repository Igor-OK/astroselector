
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Астроселектор - индивидуальный гороскоп отношений.</title>
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="css/font-awesome.css">
    <link rel="stylesheet" href="css/animate.css">
    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <!-- Custom styles for this template -->
    <link href="css/style.css" rel="stylesheet">
    <link rel="icon" type="image/png" href="img/favicon.png" />

  </head>

  <body>

    <nav class="navbar navbar-custom">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        <!--
          <img src="img/sprite.svg#Astro" class="logo-img">
          -->
          <a href="http://astroselector.com" class="navbar-brand">ASTROSELECTOR.COM</a>
          
        </div>
        <div id="navbar" class="collapse navbar-collapse navbar-right">
          <ul class="nav navbar-nav">
            <li><a href="soulmatefinder.html">Найти вторую половинку</a></li>
            <li class="active"><a href="lovehelper.html">Гороскоп отношений</a></li>
            <li><a href="astroparty.html">Устроить вечеринку</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>


<section class="astro-logo">
  <div class="container animated fadeIn">
    <div class="row">
      <div class="big-logo col-md-4 col-md-offset-4 col-sm-6 col-sm-offset-3 col-xs-6 col-xs-offset-3">
        <img src="img/sprite.svg#Astro" class="logo-img">
      </div>
    </div>
  </div>
</section>

<section class="main-text-area animated bounceInUp">
  <div class="container">
    <div class="row">
    <h1 class="mini-h1">Персональный гороскоп отношений.</h1>
        <div class="col-md-10 col-md-offset-1">
           <p>Приложение составляет подробный ИНДИВИДУАЛЬНЫЙ гороскоп, подробно освещая вопрос взаимодействия с противоположным полом. Результат подается в виде понятной инфографики.</p>
            <p>Полученная информация поможет вам:</p>
              <ul>
                <li>Подобрать время для удачного знакомства, время когда Вы наиболее обаятельны и привлекательны для противоположного пола.</li>
                <li>Определить время когда стоит (или не стоит) активничать (пригласить или согласиться на свидание и тд).</li>
                <li>Вычислить время для превосходного интима.</li>
                <li>Узнать о периодах, несущих неприятности и опасности для отношений.</li>
                <li>Узнать, когда Вы будете несносны, или агрессивны, или капризны, или максимально эгоистичны. Зная это можно избежать многих ошибок.</li>
                <li>Выделить время, благоприетное (или НЕ благоприятное) для объяснения, помолвки, бракосочетания.</li>
                <li>Обозначить время, благоприятное для зачатия.</li>
                <li>Определить сложные длительные, кризисные для личной жизни периоды, морально подготовиться к этому и преодолеть с меньшими потерями.</li>
                <li>Не упустить время, крайне благоприятное для позитивных изменений (или взятия качественно новых высот) в личной жизни</li>
                <li>Быть в курсе других влияний, что поможет Вам реализовать дополнительные возможности избежав пространственных ловушек и провокаций на пути построения гармоничных отношений.</li>
              </ul>
             <p>После того, как Вы введёте данные рождения и отправите их, на экране появится табло, похожее на автомобильный спидометр. Стрелка Этого "спидометра" будет показывать РАВНОДЕЙСТВУЮЩУЮ всех влияний на Вашу личностно-любовно-чувственную сферу в выбранный момент времени. Ниже распологаются "датчики", которые загораются чтобы сигнализировать о тех или иных ярко-выраженных влияниях. Узнать подробнее об этих влияниях можно нажав (кликнув) на горящий датчик. Чем ярче горит дачик-тем сильнее влияние.</p>
             <p>Внимание! Каждый запуск приложения скушает около 5 MB интернет-траффика</p>
             <p>Текущий расклад не всегда бывает однозначным, зачастую это смесь разных влияний. В таких случаях, когда горят датчики и хорошие и плохие, следует это трактовать следующим образом: возможности можно будет реализовать в случае грамотного избежания негативных влияний, ловушек и провокаций. Так же они могут просто уравновесить друг друга. Cтрелка может внести ясность, тк в показаниях стрелки учитывается больший спектр влияний, нежели расшифрован в датчиках.</p>
             <p>Со временем, отслеживая соотношение показаний "прибора" и событий/эмоций в личной жизни, Вы немного "откалибруете" его под себя и станете более умело им пользоваться.</p>
             <p>Отнеситесь, пожалуйста, ответственно к внесению Ваших данных рождения.</p>
             <p>Данное приложение cоздано в помощь тем, кто ищет вторую половинку по результатам расчета на astroselector.com, но обязательно будет полезно ВСЕМ. </p>
             <p>Любите и уважайте друг друга!</p>
        </div>
    </div>
  </div>
</section>




<section class="user-form-helper">
  <div class="container">
    <div class="row">

      <div class="col-md-8 col-md-offset-2">
         <h3 class="helper-form-header wow bounce">Чтобы увидеть свой гороскоп отношений, заполните форму.</h3>
     

<form name="USER" class="form-horizontal">

  <div class="form-group">
    <label for="inputName" class="col-sm-3 control-label birth-name">Ваше Имя: </label>
    <div class="col-sm-9">
      <input type="text" class="form-control user-name" id="inputName" name="user-name" placeholder="Введите Имя">
    </div>
  </div>

  <div class="form-group">
  <label class="col-sm-3 control-label birth-sex">Ваш пол: </label>  
    <div class="col-sm-9">
      <div class="radio div-birth-sex">
        <label class="radio-inline birth-male">
          <input  type="radio" id="sex-male" name="sex" value="М">M
        </label>
        <label class="radio-inline birth-female">
          <input type="radio"  id="sex-female" name="sex" value="Ж">Ж
        </label>
      </div>
    </div>
  </div>

  <div class="form-group">
    <label for="NativeDateFinder" class="col-sm-3 control-label birth-date">Дата рождения: </label>
    <div class="col-sm-9">
      <input type="text" class="form-control date" name="date" id="NativeDateFinder" placeholder='Дата в формате "дд.мм.гггг"'>
    </div>
  </div>

  <div class="form-group">
  <label class="col-sm-3 control-label birth-time">Время рождения: </label>  
    <div class="col-sm-9">
      <div class="radio div-birth-sex">
        <label id="time-label-true" class="radio-inline" >
          <input  type="radio" id="time-true" name="time" value="true">Точное время
        </label>
        <input type="text" name="exact-time" class="form-control exact-time " disabled placeholder='Время в формате "чч.мм"'>
      </div>
    </div>

    <div class="col-sm-9 col-sm-offset-3">
      <div class="radio div-birth-sex">
        <label id="time-label-false" class="radio-inline" >
          <input  type="radio" id="time-false" name="time" value="false">Не знаю, около 
        </label>
        <input type="text" name="midle-time" class="form-control exact-time " disabled placeholder='Время в формате "чч.мм"'>
      </div>
    </div>
  </div>

      <div class="form-group">
        <label class="col-sm-3 control-label birth-place">Место рождения:</label>
        <div class="col-sm-9">
          <select name="country" class="form-control country-select">
            <option disabled selected>- Выберите страну -</option>          
            <option value="Беларусь">Беларусь</option>
         <!--   <option value="2">Россия</option>
                <option value="3">Украина</option>
                <option value="4">Казахстан</option>-->
          </select>
        </div>
      </div>


      <div class="form-group">
        <div class="col-sm-9 col-sm-offset-3">
          <select name="city" class="form-control city-select">
            <option disabled selected>- Выберите населенный пункт -</option>          
          </select>
        </div>
      </div>




       <div class="sent col-sm-6 col-sm-offset-3">Показать расклад</div>

</form>

      </div>
    </div>
  </div>
</section>




<div class="to-body">

  <div class = "Progress" style='position:absolute; left:25vw; top: 30vh; border: solid white 1vh; width: 50vw;  z-index: 10'>
    <div class='ProgressPerc' style='background-color: white; height: 20vh; width: 0%'></div>
  </div>




      <div class="image">
        <div class = "square">
          <svg  id='svg' class='svg' width=220 height=220 xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' >
            <circle class='RED' cx=1 cy=1 r=1 fill=rgb(100,100,100) />
          </svg>
        </div>
      </div>




    <div class="content-container">
       <div class="info-header">
           <h3>Актуальный гороскоп отношений</h3>
       </div>
      
       <div class="info-main">
          <div class='info-window'>
            <span class="info">Нажмите на горящий индикатор, чтобы увидеть подробности.</span> 
          </div>

        <div class='under'></div> 

          <div class='controls'>
            <form class='buttons'>

              <div class='down'><span class='btnn'>назад</span></div>

              <select class='sel'>
                <option value='hour'>Час</option>
                <option selected value='day'>Сутки</option>
                <option value='week'>Неделя</option>
                <option value='month'>Месяц</option>
              </select>

              <div class='up'><span class='btnn'>вперед</span></div>

            </form>
          </div> 
       </div>

       <footer class="device-footer">
            <span class='time'>Current time </span></br>
            <span class='user'>User info</span>
       </footer>
    </div>



</div>



    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="js/bootstrap.js"></script>
  <script src='js/view.js'></script>
  <script src='js/model.js'></script>



<script src="js/wow.js"></script>
              <script>
              new WOW().init();
              </script>



  <script type="text/javascript">

//form submiting and validation

var UserForm = document.forms['USER'];


// HANDING_VALIDATING_BUTTON CODE



var SentBtn = UserForm.querySelector('.sent');
var FormHeader = document.querySelector('.helper-form-header'); 
var HeaderFromThis = 0;//value 1 - if data from json; 2 - if from user; 0 - no data/validation false


function ActiveButton (){  // function for activating of the btn
  if (name_val == true && sex_val== true && date_val == true && time_val == true && country_val == true && city_val == true){
    SentBtn.style.animation = 'BtnAnimation 1.77s infinite';
    SentBtn.style.cursor = 'pointer';
    enable_btn = true;
    if (HeaderFromThis === 1){
      FormHeader.innerText = 'Загружены данные последней сессии.';
      FormHeader.style.textShadow = '0 0 .7em white';
    }
    if (HeaderFromThis === 2){
      FormHeader.innerText = 'Данные внесены успешно.';
      FormHeader.style.textShadow = '0 0 .7em white';
    }

  }
  else{
    SentBtn.style.animation = '';
    SentBtn.style.cursor = '';
    enable_btn = false;
    FormHeader.innerText = 'Чтобы увидеть свой гороскоп отношений, заполните форму.';
    FormHeader.style.textShadow = '';
    HeaderFromThis = 2;
  }
}


var enable_btn = false;  
SentBtn.onclick = Handle_user_data;




//variables for validation
var name_val = false;
var sex_val = false;
var date_val = false;
var time_val = false;
var country_val = false;
var city_val = false;




//==============================  validation of name-field
var BName = document.querySelector('.birth-name');
var NameField = UserForm.elements['user-name'];   
NameField.onblur=NameValid;

function NameValid(){
  var Check_name = /\S+/;
  if (Check_name.test(NameField.value)){
    NameField.style.backgroundColor = 'transparent';
    NameField.style.color = '#fff';
    BName.style.textShadow = '0 0 .7em white';
    name_val = true;
  }
  else{
    NameField.style.backgroundColor = 'white';
    NameField.style.color = '#303753';
    BName.style.textShadow = '';
    name_val = false;   
  }
  ActiveButton();
}



//==============================  validation of sex-radio (should be some text effects)
var BSex = document.querySelector('.birth-sex');
var label_sex_m = document.querySelector('.birth-male');
var label_sex_fem = document.querySelector('.birth-female');
var SexRadioMale = document.getElementById('sex-male');
var SexRadioFemale = document.getElementById('sex-female');
SexRadioMale.onchange = SexValid;
SexRadioFemale.onchange = SexValid;
var SexRadio = UserForm.elements['sex'];

function SexValid(){

if (SexRadio.value == 'М'){
  label_sex_m.style.opacity = 1;
  label_sex_fem.style.opacity = 0.333;  
  label_sex_m.style.textShadow = '0 0 .7em white';
  label_sex_fem.style.color = 'white';
  BSex.style.textShadow = '0 0 .7em white';
  sex_val = true;
}
if (SexRadio.value == 'Ж'){
  label_sex_m.style.opacity = 0.33;
  label_sex_fem.style.opacity = 1; 
  label_sex_fem.style.textShadow = '0 0 .7em white';
  label_sex_m.style.color = 'white';
  BSex.style.textShadow = '0 0 .7em white';
  sex_val = true;
}
ActiveButton();
}



//==============================================  validation of date-field
var BDate = document.querySelector('.birth-date');
var DateField = UserForm.elements['date'];  
DateField.onblur = DateValid;

function DateValid(){
  var Check_date =  /^[0123]{1}[0-9]{1}\.[01]{1}[0-9]{1}\.[12]{1}[0-9]{3}$/;
  if (Check_date.test(DateField.value)){
    //==========SOME EXTRA CODE should be here about special month 
    var Check_date_arr = DateField.value.split('.');
    if((Number(Check_date_arr[0]) <= 31) && (Number(Check_date_arr[1]) <= 12) && (Number(Check_date_arr[2]) > 1961) && ( Number(Check_date_arr[2]) < 2002)){
      DateField.style.backgroundColor = 'transparent';
      BDate.style.textShadow = '0 0 .7em white';
      date_val = true;
    }
    else{
      DateField.style.backgroundColor = 'white';
      BDate.style.textShadow = '';
      date_val = false;
    }
  }
  else{
     DateField.style.backgroundColor = 'white';
     BDate.style.textShadow = '';
     date_val = false;
  }
  ActiveButton();
}




// ==========================  validation of time-field
var BTime = document.querySelector('.birth-time');
var ExactTimeField = UserForm.elements['exact-time'];   
ExactTimeField.onblur = ETimeValid;
var MidleTimeField = UserForm.elements['midle-time'];   
MidleTimeField.onblur = MTimeValid;

var TimeLabelTrue = document.getElementById('time-label-true');
var TimeLabelFalse = document.getElementById('time-label-false');
var TimeRadioTrue = document.getElementById('time-true');
var TimeRadioFalse = document.getElementById('time-false');
TimeRadioTrue.onchange = TimeAnswer;
TimeRadioFalse.onchange = TimeAnswer;

function TimeAnswer(){
  TimeLabelTrue.style.color = 'white';
  TimeLabelFalse.style.color = 'white';
  BTime.style.color = 'white';
  time_val = false;
  var TimeRadio = UserForm.elements['time'];
    if (TimeRadio.value == 'true'){
      ModelH.exact_time = 'true';
      ExactTimeField.disabled = false;
      MidleTimeField.disabled = true;
      MidleTimeField.value = "";
      TimeLabelTrue.style.opacity = 1;
      TimeLabelFalse.style.opacity = 0.25;
      ExactTimeField.style.backgroundColor = 'rgba(255,255,255,1)';
      MidleTimeField.style.backgroundColor = 'rgba(255,255,255,0.1)';
    }
    if (TimeRadio.value == 'false'){
      ModelH.exact_time = 'false';
      ExactTimeField.disabled = true;
      MidleTimeField.disabled = false; 
      ExactTimeField.value = ""; 
      TimeLabelTrue.style.opacity = 0.25;
      TimeLabelFalse.style.opacity = 1;
      ExactTimeField.style.backgroundColor = 'rgba(255,255,255,0.1)';
      MidleTimeField.style.backgroundColor = 'rgba(255,255,255,1)';
    } 
    ActiveButton(); 
}

function ETimeValid(){
  var Check_time = /^[012]{1}[0-9]{1}\.[0-5]{1}[0-9]{1}$/;
    if (Check_time.test(ExactTimeField.value)){
       var Check_time_arr = ExactTimeField.value.split('.');
       if((Number(Check_time_arr[0]) <=23) && (Number(Check_time_arr[1]) <=59)){
        ExactTimeField.style.textShadow = '0 0 .7em white';
        TimeLabelTrue.style.textShadow = '0 0 .7em white';
        BTime.style.textShadow = '0 0 .7em white';
        time_val = true;
       }
       else{
        ExactTimeField.style.textShadow = '';
        TimeLabelTrue.style.textShadow = '';
        BTime.style.textShadow = '';
        time_val = false;       
       }
    }
     else{
        ExactTimeField.style.textShadow = '';
        TimeLabelTrue.style.textShadow = '';
        BTime.style.textShadow = '';
      time_val = false;      
     }
     ActiveButton();
}

function MTimeValid(){
  var Check_time = /^[012]{1}[0-9]{1}\.[0-5]{1}[0-9]{1}$/;
    if (Check_time.test(MidleTimeField.value)){
       var Check_time_arr = MidleTimeField.value.split('.');
       if((Number(Check_time_arr[0]) <=23) && (Number(Check_time_arr[1]) <=59)){
        MidleTimeField.style.textShadow = '0 0 .7em white';
        TimeLabelFalse.style.textShadow = '0 0 .7em white';
        BTime.style.textShadow = '0 0 .7em white';
        time_val = true;
       }
       else{
        MidleTimeField.style.textShadow = '';
        TimeLabelFalse.style.textShadow = '';
        BTime.style.textShadow = ''; 
        time_val = false;      
       }
    }
     else{
        MidleTimeField.style.textShadow = '';
        TimeLabelFalse.style.textShadow = '';
        BTime.style.textShadow = ''; 
      time_val = false;       
     }
     ActiveButton();
}




//===============================  validation of country field + defining city-select
var BPlace = document.querySelector('.birth-place');
var CountrySelect = UserForm.elements['country'];
CountrySelect.onchange = CountryValid;

var CitySelect = UserForm.elements['city'];
CitySelect.onchange = CityValid;

var bel_cities = [{city:"Минск", value:"Минск"}, {city:"Брест", value:"Брест"}, {city:"Витебск", value:"Витебск"}, {city:"Гомель", value:"Гомель"}, {city:"Гродно", value:"Гродно"}, {city:"Могилёв", value:"Могилёв"}];

function CountryValid(){
  if (CountrySelect.value != ""){
    CountrySelect.style.backgroundColor = 'transparent';
    country_val = true;
  }
  if (CountrySelect.value == "Беларусь"){
    for (var j=0; j<bel_cities.length; j++)   
      {
        var sel_option=document.createElement('option');
        var ot = bel_cities[j].city;
        var option_text = document.createTextNode(ot);  
        sel_option.appendChild(option_text);
        sel_option.value=bel_cities[j].value;    
        CitySelect.appendChild(sel_option); 
        CitySelect.disabled = false;
      }
  }
  ActiveButton();
}

function CityValid(){
  if (CitySelect.value != ""){
    CitySelect.style.backgroundColor = 'transparent';
    BPlace.style.textShadow = '0 0 .7em white';
    city_val = true;
  }
  ActiveButton();
}



//----------Load data from local storage
var StoredUser=window.localStorage.getItem('is_saved');
if ( StoredUser ){
  NameField.value = window.localStorage.getItem('native_name');
  NameValid();
  if (window.localStorage.getItem('native_sex') == 'М')
    SexRadioMale.checked = true;
  if (window.localStorage.getItem('native_sex') == 'Ж')
    SexRadioFemale.checked = true;
  SexValid();
  DateField.value = window.localStorage.getItem('native_date');
  DateValid();
  if (window.localStorage.getItem('exact_time') == 'true'){
    TimeRadioTrue.checked = true;
    ExactTimeField.value = window.localStorage.getItem('native_time');
    TimeLabelFalse.style.opacity = 0.25;
    MidleTimeField.style.backgroundColor = 'rgba(255,255,255,0.1)';
    TimeAnswer()
    ETimeValid();
  }
  if (window.localStorage.getItem('exact_time') == 'false'){
    TimeRadioFalse.checked = true;
    MidleTimeField.value = window.localStorage.getItem('native_time'); 
    TimeLabelTrue.style.opacity = 0.25;
    ExactTimeField.style.backgroundColor = 'rgba(255,255,255,0.1)';
    TimeAnswer()
    MTimeValid();  
  }
  CountrySelect.value = window.localStorage.getItem('native_country');
  CountryValid();
  CitySelect.value = window.localStorage.getItem('native_city');
  CityValid();
  HeaderFromThis = 1;
  ;

}
ActiveButton();




// handling part

function Handle_user_data(){

        if (enable_btn == true){
          ModelH.native_name = NameField.value;
          ModelH.native_sex = SexRadio.value;
          ModelH.native_date = DateField.value;
          var TimeRadio = UserForm.elements['time'];
            if (TimeRadio.value == 'true'){
              ModelH.native_time = ExactTimeField.value;
              ModelH.exact_time = 'true';
            }
            if (TimeRadio.value == 'false'){
              ModelH.native_time = MidleTimeField.value;
              ModelH.exact_time = 'false';
            }  
          // take care about country!!!!!!!!!!!
          ModelH.native_country = CountrySelect.value;
          ModelH.native_city = CitySelect.value; 
          if (ModelH.native_country == 'Беларусь')
            ModelH.Belarus_gmt(); // calculating apropriate GMT



      //------------------------------dissapearing animation

      // items to disappear
          var div_mta = document.querySelector('.main-text-area');
          var div_al = document.querySelector('.astro-logo');
          var div_ufh = document.querySelector('.user-form-helper');
          div_mta.style.display='none';
          div_al.style.display='none';
          div_ufh.style.display='none';

      // items to appear
          var to_body = document.querySelector('.to-body');
          to_body.style.display='block';  


      // LOADING
          ModelH.TestLoadData() 

        }
}// end of Handle_user_data




// loading


window.addEventListener('resize',function() { ViewH.ViewResize() },false);  // sizing


// =========== listeners for buttons up&down =========
var DownBtn = document.querySelector('.down');
var UpBtn = document.querySelector('.up');
var Sel = document.querySelector('.sel');


DownBtn.addEventListener('mousedown',function() { ModelH.Go_down() },false); 
DownBtn.addEventListener('touchstart',function() { ModelH.Go_down() },false); 
UpBtn.addEventListener('mousedown',function() { ModelH.Go_up() },false); 
UpBtn.addEventListener('touchstart',function() { ModelH.Go_up() },false); 
Sel.addEventListener('change',function() { ModelH.Selector_check() },false);



//SWIPE LEFT-RIGHT
var startPoint={};
var nowPoint;
var ldelay;
document.addEventListener('touchstart', function(event) {
event.preventDefault();
event.stopPropagation();
startPoint.x=event.changedTouches[0].pageX;
startPoint.y=event.changedTouches[0].pageY;
ldelay=new Date(); 
}, false);

document.addEventListener('touchend', function(event) {
var pdelay=new Date(); 
nowPoint=event.changedTouches[0];
var xAbs = Math.abs(startPoint.x - nowPoint.pageX);
var yAbs = Math.abs(startPoint.y - nowPoint.pageY);
if ((xAbs > 20 || yAbs > 20) && (pdelay.getTime()-ldelay.getTime())<200) {
if (xAbs > yAbs) {
if (nowPoint.pageX < startPoint.x){ModelH.Go_down()}
else{ModelH.Go_up()}
}
}
}, false);


</script>


 </body>






  </body>
</html>
